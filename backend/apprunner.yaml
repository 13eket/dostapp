# dostapp/backend/apprunner.yaml
version: 1.0
runtime: python3
runtime-version: 3.11

build:
  commands:
    - python -m pip install --no-cache-dir -r requirements.txt
run:
  command: uvicorn main:app --host 0.0.0.0 --port 8000
  network:
    port: 8000
  env:
    - name: PORT
      value: "8000"
    - name: FREEDOMPAY_MERCHANT_ID
      value: "561002"
    - name: FREEDOMPAY_SECRET_KEY
      value: "DAnsdFLYehOkYdFR"
    - name: FREEDOMPAY_API_URL
      value: "https://api.freedompay.kz/init_payment.php"
    - name: MERCHANT_DOMAIN
      value: "https://www.dostapp.org"
healthcheck:
  protocol: HTTP
  path: "/"
  interval: 10
  timeout: 5
  healthyThreshold: 3
  unhealthyThreshold: 5